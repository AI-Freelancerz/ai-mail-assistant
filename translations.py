# translations.py

LANGUAGES = {
    "en": "English",
    "fr": "FranÃ§ais",
}

# This dictionary holds your translations.
# The structure is: {language_code: {key: translation_string}}
TRANSLATIONS = {
    "en": {
        "AI Email Assistant": "AI Email Assistant",
        "Welcome to the AI Email Assistant!": "Welcome to the AI Email Assistant!",
        "Select your language": "Select your language", # This is the hardcoded label, so it's fine
        "Generate Email": "Generate Email",
        "Compose your email details below.": "Compose your email details below.",
        "Recipient": "Recipient",
        "Subject": "Subject",
        "Sender": "Sender",
        "Clear Form": "Clear Form",
        "Your email has been generated! You can modify it below.": "Your email has been generated! You can modify it below.",
        "Error generating email. Please try again.": "Error generating email. Please try again.",
        "Recipient, Subject, and Body cannot be empty.": "Recipient, Subject, and Body cannot be empty.",
        "Enter a recipient": "Enter a recipient",
        "Enter a subject": "Enter a subject",
        "Enter email body": "Enter email body",
        "Enter sender name or email": "Enter sender name or email",
        # New Translations
        "1. Generation": "1. Generation",
        "2. Preview": "2. Preview",
        "3. Results": "3. Results",
        "Email sent successfully!": "Email sent successfully!",
        "Back to Generation": "Back to Generation",
        "Editable Email Content": "Editable Email Content",
        "Live Preview for First Contact": "Live Preview for First Contact",
        "Edit the email template here. Changes will reflect in the live preview.": "Edit the email template here. Changes will reflect in the live preview.",
        "This shows how the email will appear for the first contact. To make changes, use the *Editable Email Content* section on the left.": "This shows how the email will appear for the first contact. To make changes, use the 'Editable Email Content' section on the left.",
        "Add Attachments": "Add Attachments",
        "Upload files": "Upload files",
        "Current Attachments": "Current Attachments",
        "Confirm Send": "Confirm Send",
        "No contacts loaded to send emails to.": "No contacts loaded to send emails to.",
        "Subject and Body cannot be empty. Please go back to Generation if needed.": "Subject and Body cannot be empty. Please go back to Generation if needed.",
        "All emails sent successfully!": "All emails sent successfully!",
        "All {count} emails were sent without any issues.": "All {count} emails were sent without any issues.",
        "Sending complete with errors.": "Sending complete with errors.",
        "Some emails failed to send. Please check the log below for details.": "Some emails failed to send. Please check the log below for details.",
        "No emails were processed.": "No emails were processed.",
        "Total Contacts Processed": "Total Contacts Processed",
        "Emails Sent Successfully": "Emails Sent Successfully",
        "Emails Failed to Send": "Emails Failed to Send",
        "Show Activity Log and Errors": "Show Activity Log and Errors",
        "Individual Email Status & Events": "Individual Email Status & Events",
        "Message ID": "Message ID",
        "Refresh Events for this Email": "Refresh Events for this Email",
        "Events": "Events",
        "No events found yet for this message. Click 'Refresh Events' to check.": "Aucun Ã©vÃ©nement trouvÃ© pour ce message. Cliquez sur 'Actualiser les Ã©vÃ©nements' pour vÃ©rifier.",
        "Fetching email delivery status...": "RÃ©cupÃ©ration du statut de livraison de l'e-mail...",
        "Activity Log": "Activity Log",
        "Start New Email Session": "Start New Email Session",
        "ğŸ“Š View Dashboard": "ğŸ“Š View Dashboard",
        "AI Instruction: Describe the email you want to generate.": "AI Instruction: Describe the email you want to generate.",
        "e.g., 'Draft a newsletter about our new product features.'": "e.g., 'Draft a newsletter about our new product features.'",
        "Email Context (optional): Add style, tone, or specific details.": "Email Context (optional): Add style, tone, or specific details.",
        "e.g., 'Friendly tone, include a call to action to visit our website.'": "e.g., 'Friendly tone, include a call to action to visit our website.'",
        "Personalize emails?": "Personalize emails?",
        "Generic Greeting (e.g., 'Dear Valued Customer')": "Generic Greeting (e.g., 'Dear Valued Customer')",
        "Enter a generic greeting if not personalizing": "Enter a generic greeting if not personalizing",
        "Add a Custom Button?": "Add a Custom Button?",
        "Custom Button Text": "Custom Button Text",
        "e.g., 'Learn More'": "e.g., 'Learn More'",
        "Button URL": "Button URL",
        "e.g., 'https://your-website.com'": "e.g., 'https://your-website.com'",
        "Please provide instructions for the AI to generate the email.": "Please provide instructions for the AI to generate the email.",
        "Successfully loaded {count} valid contacts.": "Successfully loaded {count} valid contacts.",
        "WARNING: Some contacts had issues (e.g., missing/invalid/duplicate emails). They will be skipped.": "WARNING: Some contacts had issues (e.g., missing/invalid/duplicate emails). They will be skipped.",
        "No valid contacts found in the Excel file.": "No valid contacts found in the Excel file.",
        "Please upload an Excel file to get started.": "Please upload an Excel file to get started.",
        "Sender Email": "Sender Email",
        "Not configured": "Not configured",
        "Sender email credentials are not configured. Please set SENDER_EMAIL and BREVO_API_KEY in Streamlit secrets.": "Sender email credentials are not configured. Please set SENDER_EMAIL and BREVO_API_KEY in Streamlit secrets.",
        "Upload Excel (.xlsx/.xls)": "Upload Excel (.xlsx/.xls)",
        "Attachments selected: {count}": "Attachments selected: {count}",
        "Donate Button Text": "Donate Now",
        "Donate Button URL": "https://www.migdal-france.org/MIGDAL-FRANCE_WEB/FR/PAIEMENT_STRIPE/DONS-PAIEMENT-CB.awp",
        "Valued Customer": "Valued Customer", # New fallback generic greeting
        "Language": "Language", # For the sidebar selectbox label
        "Dear": "Dear", # Added for dynamic salutation prefix
        "Characters: {n}": "Characters: {n}",
        "Tax Refund Text": "Your donation is eligible for a 66% tax refund.",
        "Association Info": "Migdal France | 1 rue de la Paix, 75002 Paris | contact@migdal-france.org",
        "Unsubscribe Text": "To unsubscribe from our mailing list, please click here.",
        "Row {row_num}: Invalid or missing email for '{name}' (Email: '{email}').": "Row {row_num}: Invalid or missing email for '{name}' (Email: '{email}').",
        "Email Buttons Configuration": "Email Buttons Configuration",
        "Text Before Button": "Text Before Button",
        "e.g. 'click the button below to learn more'": "e.g. 'click the button below to learn more'",
        "Button Color": "Button Color",
        "Preview Color": "Preview Color",
        "Bulk send completed successfully!": "Bulk send completed successfully!",
        "Total emails sent: {count}": "Total emails sent: {count}",
        "Success rate: {success}/{total} ({percentage:.1f}%)": "Success rate: {success}/{total} ({percentage:.1f}%)",
        "Preparing and sending emails... This may take several minutes for large lists.": "Preparing and sending emails... This may take several minutes for large lists.",
        "Generation & Setup": "Generation & Setup",
        "Preview & Send": "Preview & Send",
        "Results": "Results",
        # Email Status Page
        "Email Status Dashboard": "Email Status Dashboard",
        "View latest email activity from Brevo. Data is fetched live on each refresh.": "View latest email activity from Brevo. Data is fetched live on each refresh.",
        "Brevo API key not found in secrets. Please configure it in .streamlit/secrets.toml": "Brevo API key not found in secrets. Please configure it in .streamlit/secrets.toml",
        "Error reading secrets: ": "Error reading secrets: ",
        "Filters": "Filters",
        "Time Range": "Time Range",
        "Results per page": "Results per page",
        "Event Type": "Event Type",
        "Search by Email": "Search by Email",
        "Test Connection": "Test Connection",
        "Testing connection...": "Testing connection...",
        "ğŸ”„ Refresh Data": "ğŸ”„ Refresh Data",
        "Fetching email events from Brevo...": "Fetching email events from Brevo...",
        "Summary": "Summary",
        "Total Events": "Total Events",
        "Delivered": "Delivered",
        "Opened": "Opened",
        "Clicked": "Clicked",
        "ğŸ“Š Event Type Breakdown": "ğŸ“Š Event Type Breakdown",
        "Count": "Count",
        "Email Events": "Email Events",
        "Showing {start}-{end} of {total} events": "Showing {start}-{end} of {total} events",
        "Time": "Time",
        "Event": "Event",
        "Tag": "Tag",
        "View Details": "View Details",
        "Template ID": "Template ID",
        "Reason": "Reason",
        "Link": "Link",
        "Previous": "Previous",
        "Page": "Page",
        "Next": "Next",
        "No email events found for the selected time range and filters.": "No email events found for the selected time range and filters.",
        "Try adjusting your filters or time range.": "Try adjusting your filters or time range.",
        "Error fetching email events: ": "Error fetching email events: ",
        "Debug Information": "Debug Information",
        "Data fetched live from Brevo": "Data fetched live from Brevo",
        "Last updated": "Last updated",
        "Start Date": "Start Date",
        "End Date": "End Date",
        # Email Status Page - Additional translations
        "âŒ Brevo API key not found in configuration": "âŒ Brevo API key not found in configuration",
        "Please configure your Brevo API key to use this feature.": "Please configure your Brevo API key to use this feature.",
        "ğŸ“– How to configure": "ğŸ“– How to configure",
        "âš ï¸ API key format looks unusual. Brevo API keys typically start with 'xkeysib-'": "âš ï¸ API key format looks unusual. Brevo API keys typically start with 'xkeysib-'",
        "âŒ Failed to initialize Brevo client: ": "âŒ Failed to initialize Brevo client: ",
        "ğŸ“Š Campaign Dashboard": "ğŸ“Š Campaign Dashboard",
        "ğŸ‘ˆ Select a campaign from the sidebar to view details": "ğŸ‘ˆ Select a campaign from the sidebar to view details",
        "Sent": "Sent",
        "Failed": "Failed",
        "Read": "Read",
        "of delivered": "of delivered",
        "ğŸ“‹ Activity Log": "ğŸ“‹ Activity Log",
        "â„¹ï¸ Understanding email tracking": "â„¹ï¸ Understanding email tracking",
        "ğŸ” Show debug info": "ğŸ” Show debug info",
        "Recipient": "Recipient",
        "Delivery Status": "Delivery Status",
        "Timestamp": "Timestamp",
        "Clicked Links": "Clicked Links",
        "âŒ Failed": "âŒ Failed",
        "ğŸ¯ Engaged (Opened & Clicked)": "ğŸ¯ Engaged (Opened & Clicked)",
        "ğŸ”— Clicked (without open tracking)": "ğŸ”— Clicked (without open tracking)",
        "ğŸ“– Opened": "ğŸ“– Opened",
        "âœ… Delivered": "âœ… Delivered",
        "âš ï¸ Delayed": "âš ï¸ Delayed",
        "â³ Pending": "â³ Pending",
        "Delivered Count": "Delivered Count",
        "Opened Count": "Opened Count",
        "Clicks Count": "Clicks Count",
        "Hard Bounces": "Hard Bounces",
        "Soft Bounces": "Soft Bounces",
        "Deferred": "Deferred",
        "Status Priority": "Status Priority",
        "Rate limit exceeded. Please wait a moment and try again.": "Rate limit exceeded. Please wait a moment and try again.",
        "Brevo API has rate limits. The system will automatically retry with exponential backoff.": "Brevo API has rate limits. The system will automatically retry with exponential backoff.",
        "Authentication error. Please check your Brevo API key.": "Authentication error. Please check your Brevo API key.",
        "Your API key may be invalid or may not have the required permissions.": "Your API key may be invalid or may not have the required permissions.",
        "Resource not found. The requested data may not exist.": "Resource not found. The requested data may not exist.",
        "Request timed out. Please try again.": "Request timed out. Please try again.",
        "ğŸ” Debug Information": "ğŸ” Debug Information",
        "Error Type:": "Error Type:",
        "Possible Solutions:": "Possible Solutions:",
        "Email": "Email",
        "Unsubscribed": "Unsubscribed",
        "Error": "Error",
        "Spam": "Spam",
        # View Options & Filters
        "âš™ï¸ View Options & Filters": "âš™ï¸ View Options & Filters",
        "Exclude test emails or filter to specific campaigns. This does not delete any data.": "Exclude test emails or filter to specific campaigns. This does not delete any data.",
        "Exclusion Filter": "Exclusion Filter",
        "Exclude items containing:": "Exclude items containing:",
        "e.g., @mycompany.com, test@example.com, [TEST]": "e.g., @mycompany.com, test@example.com, [TEST]",
        "Enter comma-separated email addresses, domains, or subject keywords to exclude.": "Enter comma-separated email addresses, domains, or subject keywords to exclude.",
        "Inclusion Filter": "Inclusion Filter",
        "Include only items containing:": "Include only items containing:",
        "e.g., [PROD], newsletter, @client.com": "e.g., [PROD], newsletter, @client.com",
        "Enter comma-separated email addresses, domains, or subject keywords. Only matching items will be shown.": "Enter comma-separated email addresses, domains, or subject keywords. Only matching items will be shown.",
        "Apply Filters": "Apply Filters",
        "Clear Filters": "Clear Filters",
        "Excluded: {count}": "Excluded: {count}",
        "Filtered by inclusion: {count}": "Filtered by inclusion: {count}",
        "Last 24 hours": "Last 24 hours",
        "Last hour": "Last hour",
        "Last 48 hours": "Last 48 hours",
        "Last 7 days": "Last 7 days",
        "Last 3 months": "Last 3 months",
        "Generate & Send Emails": "Generate & Send Emails",
        "ğŸ”„": "ğŸ”„",
        "ğŸ”„ Refresh": "ğŸ”„ Refresh",
        # Email tracking explanation
        "How email tracking works:": "How email tracking works:",
        "Delivered: Email successfully reached the recipient's inbox": "Delivered: Email successfully reached the recipient's inbox",
        "Read (Opened): Recipient opened the email and loaded images (tracking pixel)": "Read (Opened): Recipient opened the email and loaded images (tracking pixel)",
        "Clicked: Recipient clicked a link in the email": "Clicked: Recipient clicked a link in the email",
        "Why you might see \"Clicked\" without \"Read\":": "Why you might see \"Clicked\" without \"Read\":",
        "Recipient has images disabled/blocked in their email client": "Recipient has images disabled/blocked in their email client",
        "Recipient clicked a link from email preview without fully opening": "Recipient clicked a link from email preview without fully opening",
        "Some email clients block tracking pixels but allow link clicks": "Some email clients block tracking pixels but allow link clicks",
        "This is normal and indicates engagement even without open tracking!": "This is normal and indicates engagement even without open tracking!",
        # Email Status Explanations - Extended
        "Email Delivery Statuses:": "Email Delivery Statuses:",
        "Permanent failure - email address doesn't exist, domain is invalid, or unreachable": "Permanent failure - email address doesn't exist, domain is invalid, or unreachable",
        "Temporary issues (mailbox full, server busy), blocked by server, or other errors": "Temporary issues (mailbox full, server busy), blocked by server, or other errors",
        "Deferred - email is still being retried by the server": "Deferred - email is still being retried by the server",
        "Email successfully reached the recipient's inbox": "Email successfully reached the recipient's inbox",
        "Recipient opened the email and loaded images (tracking pixel)": "Recipient opened the email and loaded images (tracking pixel)",
        "Recipient clicked a link in the email": "Recipient clicked a link in the email",
        "Recipient both opened and clicked links": "Recipient both opened and clicked links",
        "No delivery status received yet from Brevo": "No delivery status received yet from Brevo",
        "Understanding Bounces:": "Understanding Bounces:",
        "Hard Bounce â†’ Invalid": "Hard Bounce â†’ Invalid",
        "The email address is permanently invalid. Brevo marks these automatically.": "The email address is permanently invalid. Brevo marks these automatically.",
        "Soft Bounce â†’ Invalid (Smart Detection)": "Soft Bounce â†’ Invalid (Smart Detection)",
        "Reasons like 'connection timeout', 'domain not found', 'no mail server' indicate the email is actually invalid.": "Reasons like 'connection timeout', 'domain not found', 'no mail server' indicate the email is actually invalid.",
        "Soft Bounce â†’ Failed": "Soft Bounce â†’ Failed",
        "Temporary issues - mailbox full, server temporarily down, message too large, etc. May succeed if retried later.": "Temporary issues - mailbox full, server temporarily down, message too large, etc. May succeed if retried later.",
        "Blocked â†’ Failed": "Blocked â†’ Failed",
        "Recipient's server blocked the email due to spam filters or policy rules.": "Recipient's server blocked the email due to spam filters or policy rules.",
        "Smart Invalid Detection:": "Smart Invalid Detection:",
        "The system automatically identifies invalid emails by checking:": "The system automatically identifies invalid emails by checking:",
        "Hard bounces from Brevo (always invalid)": "Hard bounces from Brevo (always invalid)",
        "Soft bounces with reasons indicating permanent failures:": "Soft bounces with reasons indicating permanent failures:",
        "Connection timeout (domain unreachable)": "Connection timeout (domain unreachable)",
        "Domain not found": "Domain not found",
        "No mail server for domain": "No mail server for domain",
        "Invalid/unknown recipient": "Invalid/unknown recipient",
        "Enable debug mode below the table to see detailed bounce reasons from Brevo.": "Enable debug mode below the table to see detailed bounce reasons from Brevo.",
        "Clicked Links Icons:": "Clicked Links Icons:",
        "Unsubscribe link clicked": "Unsubscribe link clicked",
        "Donation/payment link clicked": "Donation/payment link clicked",
        "Multiple icons show when recipient clicked multiple links (e.g., ğŸ”• ğŸ’ means both unsubscribe and donate were clicked)": "Multiple icons show when recipient clicked multiple links (e.g., ğŸ”• ğŸ’ means both unsubscribe and donate were clicked)",
        "ğŸš« Invalid Email": "ğŸš« Invalid Email",
        "Invalid Email": "Invalid Email",
        "Bounce Reason": "Bounce Reason"
    },
    "fr": {
        "AI Email Assistant": "Assistant Courriel IA",
        "Welcome to the AI Email Assistant!": "Bienvenue dans l'Assistant Courriel IA!",
        "Select your language": "SÃ©lectionnez votre langue",
        "Generate Email": "GÃ©nÃ©rer le Courriel",
        "Compose your email details below.": "Composez les dÃ©tails de votre courriel ci-dessous.",
        "Recipient": "Destinataire",
        "Subject": "Sujet",
        "Sender": "ExpÃ©diteur",
        "Clear Form": "Effacer le formulaire",
        "Your email has been generated! You can modify it below.": "Votre courriel a Ã©tÃ© gÃ©nÃ©rÃ©! Vous pouvez le modifier ci-dessous.",
        "Error generating email. Please try again.": "Erreur lors de la gÃ©nÃ©ration du courriel. Veuillez rÃ©essayer.",
        "Recipient, Subject, and Body cannot be empty.": "Le destinataire, le sujet et le corps ne peuvent pas Ãªtre vides.",
        "Enter a recipient": "Entrez un destinataire",
        "Enter a subject": "Entrez un sujet",
        "Enter email body": "Entrez le corps du courriel",
        "Enter sender name or email": "Entrez le nom ou l'adresse email de l'expÃ©diteur",
        # New Translations
        "1. Generation": "1. GÃ©nÃ©ration",
        "2. Preview": "2. PrÃ©visualisation",
        "3. Results": "3. RÃ©sultats",
        "Email sent successfully!": "Courriel envoyÃ© avec succÃ¨s!",
        "Back to Generation": "Retour Ã  la GÃ©nÃ©ration",
        "Editable Email Content": "Contenu du Courriel Modifiable",
        "Live Preview for First Contact": "PrÃ©visualisation en Direct pour le Premier Contact",
        "Edit the email template here. Changes will reflect in the live preview.": "Modifiez le modÃ¨le d'e-mail ici. Les modifications se reflÃ©teront dans l'aperÃ§u en direct.",
        "This shows how the email will appear for the first contact. To make changes, use the *Editable Email Content* section on the left.": "Ceci montre l'apparence de l'e-mail pour le premier contact. Pour apporter des modifications, utilisez la section 'Contenu de l'e-mail modifiable' sur la gauche.",
        "Add Attachments": "Ajouter des PiÃ¨ces Jointes",
        "Upload files": "TÃ©lÃ©charger des fichiers",
        "Current Attachments": "PiÃ¨ces Jointes Actuelles",
        "Confirm Send": "Confirmer l'envoi",
        "No contacts loaded to send emails to.": "Aucun contact chargÃ© pour envoyer des courriels.",
        "Subject and Body cannot be empty. Please go back to Generation if necessary.": "Le sujet et le corps ne peuvent pas Ãªtre vides. Veuillez retourner Ã  la GÃ©nÃ©ration si nÃ©cessaire.",
        "All emails sent successfully!": "Tous les courriels ont Ã©tÃ© envoyÃ©s avec succÃ¨s!",
        "All {count} emails were sent without any issues.": "Les {count} courriels ont tous Ã©tÃ© envoyÃ©s sans problÃ¨me.",
        "Sending complete with errors.": "Envoi terminÃ© avec des erreurs.",
        "Some emails failed to send. Please check the log below for details.": "Certains courriels n'ont pas pu Ãªtre envoyÃ©s. Veuillez vÃ©rifier le journal ci-dessous pour plus de dÃ©tails.",
        "No emails were processed.": "Aucun courriel n'a Ã©tÃ© traitÃ©.",
        "Total Contacts Processed": "Nombre total de contacts traitÃ©s",
        "Emails Sent Successfully": "Courriels envoyÃ©s avec succÃ¨s",
        "Emails Failed to Send": "Courriels non envoyÃ©s",
        "Show Activity Log and Errors": "Afficher le journal d'activitÃ© et les erreurs",
        "Individual Email Status & Events": "Statut et Ã©vÃ©nements des courriels individuels",
        "Message ID": "ID du message",
        "Refresh Events for this Email": "Actualiser les Ã©vÃ©nements pour ce courriel",
        "Events": "Ã‰vÃ©nements",
        "No events found yet for this message. Click 'Refresh Events' to check.": "Aucun Ã©vÃ©nement trouvÃ© pour ce message. Cliquez sur 'Actualiser les Ã©vÃ©nements' pour vÃ©rifier.",
        "Fetching email delivery status...": "RÃ©cupÃ©ration du statut de livraison de l'e-mail...",
        "Activity Log": "Journal d'activitÃ©",
        "Start New Email Session": "DÃ©marrer une nouvelle session de courriel",
        "ğŸ“Š View Dashboard": "ğŸ“Š Voir le tableau de bord",
        "AI Instruction: Describe the email you want to generate.": "Instruction IA : DÃ©crivez le courriel que vous souhaitez gÃ©nÃ©rer.",
        "e.g., 'Draft a newsletter about our new product features.'": "ex. : 'RÃ©digez une newsletter sur nos nouvelles fonctionnalitÃ©s de produit.'",
        "Email Context (optional): Add style, tone, or specific details.": "Contexte du courriel (facultatif) : Ajoutez un style, un ton ou des dÃ©tails spÃ©cifiques.",
        "e.g., 'Friendly tone, include a call to action to visit our website.'": "ex. : 'Ton amical, incluez un appel Ã  l'action pour visiter notre site web.'",
        "Personalize emails?": "Personnaliser les courriels?",
        "Generic Greeting (e.g., 'Dear Valued Customer')": "Salutation GÃ©nÃ©rique (ex. : 'Cher client')",
        "Enter a generic greeting if not personalizing": "Entrez une salutation gÃ©nÃ©rique si vous ne personnalisez pas",
        "Add a Custom Button?": "Ajouter un Bouton PersonnalisÃ©?",
        "Custom Button Text": "Texte du Bouton PersonnalisÃ©",
        "e.g., 'Learn More'": "ex. : 'En savoir plus'",
        "Button URL": "URL du Bouton",
        "e.g., 'https://your-website.com'": "ex. : 'https://votre-site-web.com'",
        "Please provide instructions for the AI to generate the email.": "Veuillez fournir des instructions Ã  l'IA pour gÃ©nÃ©rer le courriel.",
        "Successfully loaded {count} valid contacts.": "{count} contacts valides ont Ã©tÃ© chargÃ©s avec succÃ¨s.",
        "WARNING: Some contacts had issues (e.g., missing/invalid/duplicate emails). They will be skipped.": "AVERTISSEMENT : Certains contacts prÃ©sentaient des problÃ¨mes (ex. : emails manquants/invalides/dupliquÃ©s). Ils seront ignorÃ©s.",
        "No valid contacts found in the Excel file.": "Aucun contact valide n'a Ã©tÃ© trouvÃ© dans le fichier Excel.",
        "Please upload an Excel file to get started.": "Veuillez tÃ©lÃ©charger un fichier Excel pour commencer.",
        "Sender Email": "Courriel de l'expÃ©diteur",
        "Not configured": "Non configurÃ©",
        "Sender email credentials are not configured. Please set SENDER_EMAIL and BREVO_API_KEY in Streamlit secrets.": "Les informations d'identification de l'expÃ©diteur ne sont pas configurÃ©es. Veuillez dÃ©finir SENDER_EMAIL et BREVO_API_KEY dans les secrets de Streamlit.",
        "Upload Excel (.xlsx/.xls)": "TÃ©lÃ©charger un fichier Excel (.xlsx/.xls)",
        "Attachments selected: {count}": "{count} piÃ¨ces jointes sÃ©lectionnÃ©es",
        "Donate Button Text": "Faire un don",
        "Donate Button URL": "https://www.migdal-france.org/MIGDAL-FRANCE_WEB/FR/PAIEMENT_STRIPE/DONS-PAIEMENT-CB.awp",
        "Valued Customer": "Cher Client",
        "Language": "Langue",
        "Dear": "Cher", # Added for dynamic salutation prefix (translated to Cher for French)
        "Characters: {n}": "CaractÃ¨res : {n}",
        "Tax Refund Text": "Votre don est Ã©ligible Ã  une dÃ©duction fiscale de 66%.",
        "Association Info": "Migdal France | 1 rue de la Paix, 75002 Paris | contact@migdal-france.org",
        "Unsubscribe Text": "Pour vous dÃ©sinscrire de notre liste de diffusion, veuillez cliquer ici.",
        "Row {row_num}: Invalid or missing email for '{name}' (Email: '{email}').": "Ligne {row_num} : Email invalide ou manquant pour '{name}' (Email : '{email}').",
        "Email Buttons Configuration": "Configuration des boutons d'e-mail",
        "Text Before Button": "Texte avant le bouton",
        "e.g. 'click the button below to learn more'": "ex. : 'cliquez sur le bouton ci-dessous pour en savoir plus'",
        "Button Color": "Couleur du bouton",
        "Preview Color": "Couleur de l'aperÃ§u",
        "Bulk send completed successfully!": "Envoi groupÃ© terminÃ© avec succÃ¨s !",
        "Total emails sent: {count}": "Nombre total d'e-mails envoyÃ©s : {count}",
        "Success rate: {success}/{total} ({percentage:.1f}%)": "Taux de rÃ©ussite : {success}/{total} ({percentage:.1f}%)",
        "Preparing and sending emails... This may take several minutes for large lists.": "PrÃ©paration et envoi des e-mails... Cela peut prendre plusieurs minutes pour les grandes listes.",
        "Generation & Setup": "GÃ©nÃ©ration et configuration",
        "Preview & Send": "AperÃ§u et envoi",
        "Results": "RÃ©sultats",
        "Generating email with AI. This may take a few moments...": "GÃ©nÃ©ration d'email avec l'IA. Cela peut prendre quelques instants...",
        # Email Status Page
        "Email Status Dashboard": "Tableau de bord du statut des e-mails",
        "View latest email activity from Brevo. Data is fetched live on each refresh.": "Voir la derniÃ¨re activitÃ© d'e-mail de Brevo. Les donnÃ©es sont rÃ©cupÃ©rÃ©es en direct Ã  chaque actualisation.",
        "Brevo API key not found in secrets. Please configure it in .streamlit/secrets.toml": "ClÃ© API Brevo introuvable dans les secrets. Veuillez la configurer dans .streamlit/secrets.toml",
        "Error reading secrets: ": "Erreur lors de la lecture des secrets : ",
        "Filters": "Filtres",
        "Time Range": "Plage temporelle",
        "Results per page": "RÃ©sultats par page",
        "Event Type": "Type d'Ã©vÃ©nement",
        "Search by Email": "Rechercher par e-mail",
        "Test Connection": "Tester la connexion",
        "Testing connection...": "Test de la connexion...",
        "ğŸ”„ Refresh Data": "ğŸ”„ Actualiser les donnÃ©es",
        "Fetching email events from Brevo...": "RÃ©cupÃ©ration des Ã©vÃ©nements d'e-mail depuis Brevo...",
        "Summary": "RÃ©sumÃ©",
        "Total Events": "Ã‰vÃ©nements totaux",
        "Delivered": "DÃ©livrÃ©s",
        "Opened": "Ouverts",
        "Clicked": "CliquÃ©s",
        "ğŸ“Š Event Type Breakdown": "ğŸ“Š RÃ©partition par type d'Ã©vÃ©nement",
        "Count": "Nombre",
        "Email Events": "Ã‰vÃ©nements d'e-mail",
        "Showing {start}-{end} of {total} events": "Affichage de {start}-{end} sur {total} Ã©vÃ©nements",
        "Time": "Heure",
        "Event": "Ã‰vÃ©nement",
        "Tag": "Ã‰tiquette",
        "View Details": "Voir les dÃ©tails",
        "Template ID": "ID du modÃ¨le",
        "Reason": "Raison",
        "Link": "Lien",
        "Previous": "PrÃ©cÃ©dent",
        "Page": "Page",
        "Next": "Suivant",
        "No email events found for the selected time range and filters.": "Aucun Ã©vÃ©nement d'e-mail trouvÃ© pour la plage temporelle et les filtres sÃ©lectionnÃ©s.",
        "Try adjusting your filters or time range.": "Essayez d'ajuster vos filtres ou votre plage temporelle.",
        "Error fetching email events: ": "Erreur lors de la rÃ©cupÃ©ration des Ã©vÃ©nements d'e-mail : ",
        "Debug Information": "Informations de dÃ©bogage",
        "Data fetched live from Brevo": "DonnÃ©es rÃ©cupÃ©rÃ©es en direct depuis Brevo",
        "Last updated": "DerniÃ¨re mise Ã  jour",
        "Start Date": "Date de dÃ©but",
        "End Date": "Date de fin",
        "Total Recipients": "Total destinataires",
        "Bounced": "RejetÃ©s",
        "ğŸ“Š Detailed View": "ğŸ“Š Vue dÃ©taillÃ©e",
        "ğŸ“¥ Download Report": "ğŸ“¥ TÃ©lÃ©charger le rapport",
        "Email Delivery Status": "Statut de livraison des e-mails",
        "One row per recipient with event counters": "Une ligne par destinataire avec compteurs d'Ã©vÃ©nements",
        "Failed": "Ã‰chec",
        "Delayed": "RetardÃ©",
        "Pending": "En attente",
        "ğŸ’¡ Tip: Click column headers to sort": "ğŸ’¡ Astuce: Cliquez sur les en-tÃªtes de colonnes pour trier",
        "Download Report": "TÃ©lÃ©charger le rapport",
        "Export the current email status data": "Exporter les donnÃ©es de statut d'e-mail actuelles",
        "ğŸ“¥ Download as CSV": "ğŸ“¥ TÃ©lÃ©charger en CSV",
        "Preview": "AperÃ§u",
        "Showing first 10 rows of {total} total": "Affichage des 10 premiÃ¨res lignes sur {total} au total",
        "Delivered Count": "Nombre de livraisons",
        "Opened Count": "Nombre d'ouvertures",
        "Clicked Count": "Nombre de clics",
        "Hard Bounce": "Rebond dur",
        "Soft Bounce": "Rebond temporaire",
        "Blocked": "BloquÃ©",
        "Spam": "Spam",
        "Last Event": "Dernier Ã©vÃ©nement",
        "Last Event Date": "Date du dernier Ã©vÃ©nement",
        # Email Status Page - Additional translations
        "âŒ Brevo API key not found in configuration": "âŒ ClÃ© API Brevo introuvable dans la configuration",
        "Please configure your Brevo API key to use this feature.": "Veuillez configurer votre clÃ© API Brevo pour utiliser cette fonctionnalitÃ©.",
        "ğŸ“– How to configure": "ğŸ“– Comment configurer",
        "âš ï¸ API key format looks unusual. Brevo API keys typically start with 'xkeysib-'": "âš ï¸ Le format de la clÃ© API semble inhabituel. Les clÃ©s API Brevo commencent gÃ©nÃ©ralement par 'xkeysib-'",
        "âŒ Failed to initialize Brevo client: ": "âŒ Ã‰chec de l'initialisation du client Brevo : ",
        "ğŸ“Š Campaign Dashboard": "ğŸ“Š Tableau de bord des campagnes",
        "ğŸ‘ˆ Select a campaign from the sidebar to view details": "ğŸ‘ˆ SÃ©lectionnez une campagne dans la barre latÃ©rale pour voir les dÃ©tails",
        "Sent": "EnvoyÃ©s",
        "Failed": "Ã‰chec",
        "Read": "Lus",
        "of delivered": "des livrÃ©s",
        "ğŸ“‹ Activity Log": "ğŸ“‹ Journal d'activitÃ©",
        "â„¹ï¸ Understanding email tracking": "â„¹ï¸ Comprendre le suivi des e-mails",
        "ğŸ” Show debug info": "ğŸ” Afficher les informations de dÃ©bogage",
        "Recipient": "Destinataire",
        "Delivery Status": "Statut de livraison",
        "Timestamp": "Horodatage",
        "Clicked Links": "Liens cliquÃ©s",
        "âŒ Failed": "âŒ Ã‰chec",
        "ğŸ¯ Engaged (Opened & Clicked)": "ğŸ¯ EngagÃ© (Ouvert et CliquÃ©)",
        "ğŸ”— Clicked (without open tracking)": "ğŸ”— CliquÃ© (sans suivi d'ouverture)",
        "ğŸ“– Opened": "ğŸ“– Ouvert",
        "âœ… Delivered": "âœ… DÃ©livrÃ©",
        "âš ï¸ Delayed": "âš ï¸ RetardÃ©",
        "â³ Pending": "â³ En attente",
        "Delivered Count": "Nombre de livraisons",
        "Opened Count": "Nombre d'ouvertures",
        "Clicks Count": "Nombre de clics",
        "Hard Bounces": "Rebonds durs",
        "Soft Bounces": "Rebonds temporaires",
        "Deferred": "DiffÃ©rÃ©s",
        "Status Priority": "PrioritÃ© du statut",
        "Rate limit exceeded. Please wait a moment and try again.": "Limite de taux dÃ©passÃ©e. Veuillez patienter un instant et rÃ©essayer.",
        "Brevo API has rate limits. The system will automatically retry with exponential backoff.": "L'API Brevo a des limites de taux. Le systÃ¨me rÃ©essaiera automatiquement avec un dÃ©lai exponentiel.",
        "Authentication error. Please check your Brevo API key.": "Erreur d'authentification. Veuillez vÃ©rifier votre clÃ© API Brevo.",
        "Your API key may be invalid or may not have the required permissions.": "Votre clÃ© API peut Ãªtre invalide ou ne pas avoir les permissions requises.",
        "Resource not found. The requested data may not exist.": "Ressource introuvable. Les donnÃ©es demandÃ©es peuvent ne pas exister.",
        "Request timed out. Please try again.": "DÃ©lai d'attente de la requÃªte dÃ©passÃ©. Veuillez rÃ©essayer.",
        "ğŸ” Debug Information": "ğŸ” Informations de dÃ©bogage",
        "Error Type:": "Type d'erreur :",
        "Possible Solutions:": "Solutions possibles :",
        "Email": "E-mail",
        "Unsubscribed": "DÃ©sabonnÃ©",
        "Error": "Erreur",
        "Spam": "Spam",
        # View Options & Filters
        "âš™ï¸ View Options & Filters": "âš™ï¸ Options d'affichage et filtres",
        "Exclude test emails or filter to specific campaigns. This does not delete any data.": "Excluez les e-mails de test ou filtrez des campagnes spÃ©cifiques. Cela ne supprime aucune donnÃ©e.",
        "Exclusion Filter": "Filtre d'exclusion",
        "Exclude items containing:": "Exclure les Ã©lÃ©ments contenant :",
        "e.g., @mycompany.com, test@example.com, [TEST]": "ex. : @monentreprise.com, test@exemple.com, [TEST]",
        "Enter comma-separated email addresses, domains, or subject keywords to exclude.": "Entrez des adresses e-mail, des domaines ou des mots-clÃ©s de sujet sÃ©parÃ©s par des virgules Ã  exclure.",
        "Inclusion Filter": "Filtre d'inclusion",
        "Include only items containing:": "Inclure uniquement les Ã©lÃ©ments contenant :",
        "e.g., [PROD], newsletter, @client.com": "ex. : [PROD], newsletter, @client.com",
        "Enter comma-separated email addresses, domains, or subject keywords. Only matching items will be shown.": "Entrez des adresses e-mail, des domaines ou des mots-clÃ©s de sujet sÃ©parÃ©s par des virgules. Seuls les Ã©lÃ©ments correspondants seront affichÃ©s.",
        "Apply Filters": "Appliquer les filtres",
        "Clear Filters": "Effacer les filtres",
        "Excluded: {count}": "Exclus : {count}",
        "Filtered by inclusion: {count}": "FiltrÃ©s par inclusion : {count}",
        "Last 24 hours": "DerniÃ¨res 24 heures",
        "Last hour": "DerniÃ¨re heure",
        "Last 48 hours": "DerniÃ¨res 48 heures",
        "Last 7 days": "7 derniers jours",
        "Last 3 months": "3 derniers mois",
        "Generate & Send Emails": "GÃ©nÃ©rer et envoyer des e-mails",
        "ğŸ”„": "ğŸ”„",
        "ğŸ”„ Refresh": "ğŸ”„ Actualiser",
        # Email tracking explanation
        "How email tracking works:": "Comment fonctionne le suivi des e-mails :",
        "Delivered: Email successfully reached the recipient's inbox": "DÃ©livrÃ© : L'e-mail a atteint avec succÃ¨s la boÃ®te de rÃ©ception du destinataire",
        "Read (Opened): Recipient opened the email and loaded images (tracking pixel)": "Lu (Ouvert) : Le destinataire a ouvert l'e-mail et chargÃ© les images (pixel de suivi)",
        "Clicked: Recipient clicked a link in the email": "CliquÃ© : Le destinataire a cliquÃ© sur un lien dans l'e-mail",
        "Why you might see \"Clicked\" without \"Read\":": "Pourquoi vous pourriez voir \"CliquÃ©\" sans \"Lu\" :",
        "Recipient has images disabled/blocked in their email client": "Le destinataire a dÃ©sactivÃ©/bloquÃ© les images dans son client de messagerie",
        "Recipient clicked a link from email preview without fully opening": "Le destinataire a cliquÃ© sur un lien depuis l'aperÃ§u de l'e-mail sans l'ouvrir complÃ¨tement",
        "Some email clients block tracking pixels but allow link clicks": "Certains clients de messagerie bloquent les pixels de suivi mais autorisent les clics sur les liens",
        "This is normal and indicates engagement even without open tracking!": "C'est normal et indique un engagement mÃªme sans suivi d'ouverture !",
        # Email Status Explanations - Extended
        "Email Delivery Statuses:": "Statuts de livraison des e-mails :",
        "Permanent failure - email address doesn't exist, domain is invalid, or unreachable": "Ã‰chec permanent - l'adresse e-mail n'existe pas, le domaine est invalide ou inaccessible",
        "Temporary issues (mailbox full, server busy), blocked by server, or other errors": "ProblÃ¨mes temporaires (boÃ®te aux lettres pleine, serveur occupÃ©), bloquÃ© par le serveur, ou autres erreurs",
        "Deferred - email is still being retried by the server": "DiffÃ©rÃ© - l'e-mail est toujours en cours de rÃ©essai par le serveur",
        "Email successfully reached the recipient's inbox": "L'e-mail a atteint avec succÃ¨s la boÃ®te de rÃ©ception du destinataire",
        "Recipient opened the email and loaded images (tracking pixel)": "Le destinataire a ouvert l'e-mail et chargÃ© les images (pixel de suivi)",
        "Recipient clicked a link in the email": "Le destinataire a cliquÃ© sur un lien dans l'e-mail",
        "Recipient both opened and clicked links": "Le destinataire a ouvert et cliquÃ© sur des liens",
        "No delivery status received yet from Brevo": "Aucun statut de livraison reÃ§u de Brevo pour le moment",
        "Understanding Bounces:": "Comprendre les rebonds :",
        "Hard Bounce â†’ Invalid": "Rebond dur â†’ Invalide",
        "The email address is permanently invalid. Brevo marks these automatically.": "L'adresse e-mail est dÃ©finitivement invalide. Brevo les marque automatiquement.",
        "Soft Bounce â†’ Invalid (Smart Detection)": "Rebond temporaire â†’ Invalide (DÃ©tection intelligente)",
        "Reasons like 'connection timeout', 'domain not found', 'no mail server' indicate the email is actually invalid.": "Des raisons comme 'dÃ©lai de connexion dÃ©passÃ©', 'domaine introuvable', 'aucun serveur de messagerie' indiquent que l'e-mail est en rÃ©alitÃ© invalide.",
        "Soft Bounce â†’ Failed": "Rebond temporaire â†’ Ã‰chec",
        "Temporary issues - mailbox full, server temporarily down, message too large, etc. May succeed if retried later.": "ProblÃ¨mes temporaires - boÃ®te aux lettres pleine, serveur temporairement hors service, message trop volumineux, etc. Peut rÃ©ussir si rÃ©essayÃ© plus tard.",
        "Blocked â†’ Failed": "BloquÃ© â†’ Ã‰chec",
        "Recipient's server blocked the email due to spam filters or policy rules.": "Le serveur du destinataire a bloquÃ© l'e-mail en raison de filtres anti-spam ou de rÃ¨gles de politique.",
        "Smart Invalid Detection:": "DÃ©tection intelligente des invalides :",
        "The system automatically identifies invalid emails by checking:": "Le systÃ¨me identifie automatiquement les e-mails invalides en vÃ©rifiant :",
        "Hard bounces from Brevo (always invalid)": "Rebonds durs de Brevo (toujours invalides)",
        "Soft bounces with reasons indicating permanent failures:": "Rebonds temporaires avec des raisons indiquant des Ã©checs permanents :",
        "Connection timeout (domain unreachable)": "DÃ©lai de connexion dÃ©passÃ© (domaine inaccessible)",
        "Domain not found": "Domaine introuvable",
        "No mail server for domain": "Aucun serveur de messagerie pour le domaine",
        "Invalid/unknown recipient": "Destinataire invalide/inconnu",
        "Enable debug mode below the table to see detailed bounce reasons from Brevo.": "Activez le mode dÃ©bogage sous le tableau pour voir les raisons de rebond dÃ©taillÃ©es de Brevo.",
        "Clicked Links Icons:": "IcÃ´nes des liens cliquÃ©s :",
        "Unsubscribe link clicked": "Lien de dÃ©sabonnement cliquÃ©",
        "Donation/payment link clicked": "Lien de don/paiement cliquÃ©",
        "Multiple icons show when recipient clicked multiple links (e.g., ğŸ”• ğŸ’ means both unsubscribe and donate were clicked)": "Plusieurs icÃ´nes s'affichent lorsque le destinataire a cliquÃ© sur plusieurs liens (par ex., ğŸ”• ğŸ’ signifie que le dÃ©sabonnement et le don ont Ã©tÃ© cliquÃ©s)",
        "ğŸš« Invalid Email": "ğŸš« E-mail invalide",
        "Invalid Email": "E-mail invalide",
        "Bounce Reason": "Raison du rebond"
    }
}

# Default language if no session state is set
DEFAULT_LANG = "en"

# Global variable to store the selected language
_selected_lang = DEFAULT_LANG

def set_language(lang_code):
    """Sets the global language for translations."""
    global _selected_lang
    if lang_code in LANGUAGES:
        _selected_lang = lang_code
    else:
        _selected_lang = DEFAULT_LANG # Fallback to default if invalid code

def _t(key, **kwargs):
    """
    Translates a given key into the selected language and formats it with kwargs.
    If the key is not found, it returns the key itself as a fallback.
    """
    translation = TRANSLATIONS.get(_selected_lang, {}).get(key, key)
    try:
        # Attempt to format the string with provided keyword arguments
        return translation.format(**kwargs)
    except KeyError as e:
        # Log or handle cases where a placeholder is missing in the translation string
        # For now, we'll just return the unformatted translation with a warning.
        print(f"Translation Error: Missing placeholder {e} for key '{key}' in language '{_selected_lang}'. Original translation: '{translation}'")
        return translation # Return unformatted string if formatting fails
    except IndexError as e:
        print(f"Translation Error: Index error {e} for key '{key}' in language '{_selected_lang}'. Original translation: '{translation}'")
        return translation # Return unformatted string if formatting fails
